# douban-api

è±†ç“£APIæœåŠ¡ - åŸºäºè±†ç“£ç§»åŠ¨ç«¯APIè·å–å½±è§†çƒ­é—¨æ¦œå•æ•°æ®

## é¡¹ç›®ç®€ä»‹

æœ¬é¡¹ç›®æ˜¯ä¸€ä¸ªåŸºäºè±†ç“£ç§»åŠ¨ç«¯APIçš„å½±è§†æ¦œå•æœåŠ¡ï¼Œå®Œå…¨ä½¿ç”¨ `https://m.douban.com/rexxar/api/v2/subject/recent_hot/` è¿™ä¸ªç§»åŠ¨ç«¯å†…éƒ¨APIæ¥è·å–æ•°æ®ã€‚é¡¹ç›®é‡‡ç”¨Dockerå®¹å™¨åŒ–éƒ¨ç½²ï¼Œæä¾›RESTful APIæ¥å£ï¼Œæ”¯æŒè·å–è±†ç“£æ‰€æœ‰æ”¯æŒçš„å½±è§†å†…å®¹æ¦œå•ã€‚

## åŠŸèƒ½ç‰¹æ€§

- ğŸ¬ **ç”µå½±æ¦œå•**: æ”¯æŒçƒ­é—¨ã€æœ€æ–°ã€è±†ç“£é«˜åˆ†ã€å†·é—¨ä½³ç‰‡ã€åè¯­ã€æ¬§ç¾ã€éŸ©å›½ã€æ—¥æœ¬ç­‰8ç§æ¦œå•
- ğŸ“º **ç”µè§†å‰§æ¦œå•**: æ”¯æŒç»¼åˆã€å›½äº§å‰§ã€ç»¼è‰ºã€æ¬§ç¾å‰§ã€æ—¥å‰§ã€éŸ©å‰§ã€åŠ¨ç”»ã€çºªå½•ç‰‡ç­‰8ç§æ¦œå•
- ğŸ³ **Dockeréƒ¨ç½²**: å®Œå…¨åŸºäºDockerå®¹å™¨è¿è¡Œï¼Œå¼€ç®±å³ç”¨
- ğŸš€ **é«˜æ€§èƒ½**: åŸºäºExpress.jsæ¡†æ¶ï¼Œè½»é‡çº§é«˜æ€§èƒ½
- ğŸ“‹ **æ ‡å‡†åŒ–API**: ç»Ÿä¸€çš„å“åº”æ ¼å¼ï¼Œå®Œå–„çš„é”™è¯¯å¤„ç†
- ğŸ”§ **æ˜“äºæ‰©å±•**: æ¨¡å—åŒ–è®¾è®¡ï¼Œæ˜“äºç»´æŠ¤å’Œæ‰©å±•

## æ”¯æŒçš„æ¦œå•ç±»å‹

### ç”µå½±æ¦œå• (4å¤§ç±» Ã— 5å°ç±» = 20ä¸ªåˆ†ç±»)

#### çƒ­é—¨ç”µå½±
- å…¨éƒ¨: `/api/douban/movie/hot/å…¨éƒ¨`
- åè¯­: `/api/douban/movie/hot/åè¯­`
- æ¬§ç¾: `/api/douban/movie/hot/æ¬§ç¾`
- éŸ©å›½: `/api/douban/movie/hot/éŸ©å›½`
- æ—¥æœ¬: `/api/douban/movie/hot/æ—¥æœ¬`

#### æœ€æ–°ç”µå½±
- å…¨éƒ¨: `/api/douban/movie/latest/å…¨éƒ¨`
- åè¯­: `/api/douban/movie/latest/åè¯­`
- æ¬§ç¾: `/api/douban/movie/latest/æ¬§ç¾`
- éŸ©å›½: `/api/douban/movie/latest/éŸ©å›½`
- æ—¥æœ¬: `/api/douban/movie/latest/æ—¥æœ¬`

#### è±†ç“£é«˜åˆ†
- å…¨éƒ¨: `/api/douban/movie/top/å…¨éƒ¨`
- åè¯­: `/api/douban/movie/top/åè¯­`
- æ¬§ç¾: `/api/douban/movie/top/æ¬§ç¾`
- éŸ©å›½: `/api/douban/movie/top/éŸ©å›½`
- æ—¥æœ¬: `/api/douban/movie/top/æ—¥æœ¬`

#### å†·é—¨ä½³ç‰‡
- å…¨éƒ¨: `/api/douban/movie/underrated/å…¨éƒ¨`
- åè¯­: `/api/douban/movie/underrated/åè¯­`
- æ¬§ç¾: `/api/douban/movie/underrated/æ¬§ç¾`
- éŸ©å›½: `/api/douban/movie/underrated/éŸ©å›½`
- æ—¥æœ¬: `/api/douban/movie/underrated/æ—¥æœ¬`

### å‰§é›†æ¦œå• (2å¤§ç±»ï¼Œå…±10ä¸ªåˆ†ç±»)

#### æœ€è¿‘çƒ­é—¨å‰§é›† (7ä¸ªåˆ†ç±»)
- ç»¼åˆ: `/api/douban/tv/drama/ç»¼åˆ`
- å›½äº§å‰§: `/api/douban/tv/drama/å›½äº§å‰§`
- æ¬§ç¾å‰§: `/api/douban/tv/drama/æ¬§ç¾å‰§`
- æ—¥å‰§: `/api/douban/tv/drama/æ—¥å‰§`
- éŸ©å‰§: `/api/douban/tv/drama/éŸ©å‰§`
- åŠ¨ç”»: `/api/douban/tv/drama/åŠ¨ç”»`
- çºªå½•ç‰‡: `/api/douban/tv/drama/çºªå½•ç‰‡`

#### æœ€è¿‘çƒ­é—¨ç»¼è‰º (3ä¸ªåˆ†ç±»)
- ç»¼åˆ: `/api/douban/tv/variety/ç»¼åˆ`
- å›½å†…: `/api/douban/tv/variety/å›½å†…`
- å›½å¤–: `/api/douban/tv/variety/å›½å¤–`

## å¿«é€Ÿå¼€å§‹

### ä½¿ç”¨Docker Compose (æ¨è)

```yaml
version: "3.8"
services:
  douban-api:
    image: x1ao4/douban-api:latest
    container_name: douban-api
    ports:
      - 3000:3000
    restart: unless-stopped
```

### ä½¿ç”¨Docker

ç›´æ¥è¿è¡Œé¢„æ„å»ºçš„é•œåƒï¼š
```bash
docker run -d -p 3000:3000 --name douban-api x1ao4/douban-api:latest
```

## APIæ–‡æ¡£

### åŸºç¡€ä¿¡æ¯
- åŸºç¡€URL: `http://localhost:3000`
- å“åº”æ ¼å¼: JSON
- å­—ç¬¦ç¼–ç : UTF-8

### é€šç”¨å“åº”æ ¼å¼
```json
{
  "success": true,
  "code": 0,
  "data": {},
  "message": "æ“ä½œæˆåŠŸ",
  "timestamp": "2024-01-01T00:00:00.000Z"
}
```

### ç”µå½±æ¦œå•æ¥å£

#### çƒ­é—¨ç”µå½±æ¦œå•
```
GET /api/douban/movie/hot/:type?
```

#### æœ€æ–°ç”µå½±æ¦œå•
```
GET /api/douban/movie/latest/:type?
```

#### è±†ç“£é«˜åˆ†ç”µå½±æ¦œå•
```
GET /api/douban/movie/top/:type?
```

#### å†·é—¨ä½³ç‰‡æ¦œå•
```
GET /api/douban/movie/underrated/:type?
```

**è·¯å¾„å‚æ•°:**
- `type` (string, å¯é€‰): åœ°åŒºç±»å‹ï¼Œå¯é€‰å€¼: `å…¨éƒ¨`ã€`åè¯­`ã€`æ¬§ç¾`ã€`éŸ©å›½`ã€`æ—¥æœ¬`ï¼Œé»˜è®¤`å…¨éƒ¨`

**æŸ¥è¯¢å‚æ•°:**
- `start` (number, å¯é€‰): èµ·å§‹ä½ç½®ï¼Œé»˜è®¤0
- `limit` (number, å¯é€‰): è¿”å›æ•°é‡ï¼Œé»˜è®¤20ï¼Œæœ€å¤§100

**ç¤ºä¾‹è¯·æ±‚:**
```bash
# è·å–çƒ­é—¨ç”µå½± - å…¨éƒ¨
curl "http://localhost:3000/api/douban/movie/hot/å…¨éƒ¨"

# è·å–è±†ç“£é«˜åˆ† - åè¯­
curl "http://localhost:3000/api/douban/movie/top/åè¯­"

# è·å–æœ€æ–°ç”µå½± - æ¬§ç¾
curl "http://localhost:3000/api/douban/movie/latest/æ¬§ç¾?limit=10"
```

### å‰§é›†æ¦œå•æ¥å£

#### æœ€è¿‘çƒ­é—¨å‰§é›†
```
GET /api/douban/tv/drama/:type?
```

**è·¯å¾„å‚æ•°:**
- `type` (string, å¯é€‰): å‰§é›†ç±»å‹ï¼Œå¯é€‰å€¼: `ç»¼åˆ`ã€`å›½äº§å‰§`ã€`æ¬§ç¾å‰§`ã€`æ—¥å‰§`ã€`éŸ©å‰§`ã€`åŠ¨ç”»`ã€`çºªå½•ç‰‡`ï¼Œé»˜è®¤`ç»¼åˆ`

#### æœ€è¿‘çƒ­é—¨ç»¼è‰º
```
GET /api/douban/tv/variety/:type?
```

**è·¯å¾„å‚æ•°:**
- `type` (string, å¯é€‰): ç»¼è‰ºç±»å‹ï¼Œå¯é€‰å€¼: `ç»¼åˆ`ã€`å›½å†…`ã€`å›½å¤–`ï¼Œé»˜è®¤`ç»¼åˆ`

**æŸ¥è¯¢å‚æ•°:**
- `start` (number, å¯é€‰): èµ·å§‹ä½ç½®ï¼Œé»˜è®¤0
- `limit` (number, å¯é€‰): è¿”å›æ•°é‡ï¼Œé»˜è®¤20ï¼Œæœ€å¤§100

**ç¤ºä¾‹è¯·æ±‚:**
```bash
# è·å–æœ€è¿‘çƒ­é—¨å‰§é›† - éŸ©å‰§
curl "http://localhost:3000/api/douban/tv/drama/éŸ©å‰§"

# è·å–æœ€è¿‘çƒ­é—¨ç»¼è‰º - å›½å†…
curl "http://localhost:3000/api/douban/tv/variety/å›½å†…?limit=10"

# è·å–åŠ¨ç”»
curl "http://localhost:3000/api/douban/tv/drama/åŠ¨ç”»"
```

### å…¼å®¹æ€§æ¥å£

#### é€šç”¨ç”µå½±æ¥å£ (å…¼å®¹æ—§ç‰ˆæœ¬)
```
GET /api/douban/movie/recent_hot
```

#### é€šç”¨å‰§é›†æ¥å£ (å…¼å®¹æ—§ç‰ˆæœ¬)
```
GET /api/douban/tv/recent_hot
```

### å…¶ä»–æ¥å£

#### è·å–ç”µå½±ç±»åˆ«åˆ—è¡¨
```
GET /api/douban/movie/categories
```

#### è·å–å‰§é›†ç±»åˆ«åˆ—è¡¨
```
GET /api/douban/tv/categories
```

#### è·å–æ‰€æœ‰ç±»åˆ«åˆ—è¡¨
```
GET /api/douban/categories
```

#### å¥åº·æ£€æŸ¥
```
GET /health
```

#### APIæ–‡æ¡£
```
GET /
```

## ç¯å¢ƒå˜é‡

é¡¹ç›®æ”¯æŒé€šè¿‡ `.env` æ–‡ä»¶é…ç½®ç¯å¢ƒå˜é‡ï¼ˆå¯é€‰ï¼‰:

```bash
# æœåŠ¡ç«¯å£ï¼ˆé»˜è®¤: 3000ï¼‰
PORT=3000
```

å¦‚æœä¸åˆ›å»º `.env` æ–‡ä»¶ï¼ŒæœåŠ¡å°†ä½¿ç”¨é»˜è®¤ç«¯å£ 3000ã€‚

## æ³¨æ„äº‹é¡¹

1. **ä½¿ç”¨é™åˆ¶**: æœ¬æœåŠ¡ä»…ç”¨äºå­¦ä¹ å’Œç ”ç©¶ç›®çš„ï¼Œè¯·éµå®ˆè±†ç“£çš„ä½¿ç”¨æ¡æ¬¾
2. **è¯·æ±‚é¢‘ç‡**: å»ºè®®åˆç†æ§åˆ¶è¯·æ±‚é¢‘ç‡ï¼Œé¿å…å¯¹è±†ç“£æœåŠ¡é€ æˆå‹åŠ›
3. **æ•°æ®æ¥æº**: æ‰€æœ‰æ•°æ®æ¥æºäºè±†ç“£ç§»åŠ¨ç«¯APIï¼Œæ•°æ®å‡†ç¡®æ€§å’Œå¯ç”¨æ€§ä¾èµ–äºè±†ç“£æœåŠ¡
4. **ç½‘ç»œç¯å¢ƒ**: ç¡®ä¿æœåŠ¡å™¨èƒ½å¤Ÿæ­£å¸¸è®¿é—®è±†ç“£ç§»åŠ¨ç«¯API
