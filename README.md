# Douban API
æœ¬é¡¹ç›®æ˜¯ä¸€ä¸ªåŸºäº[è±†ç“£](https://movie.douban.com/)ç§»åŠ¨ç«¯ API çš„å½±è§†æ¦œå•æ•°æ®è·å–æœåŠ¡ï¼Œå®Œå…¨ä½¿ç”¨ `https://m.douban.com/rexxar/api/v2/subject/recent_hot/` è¿™ä¸ªç§»åŠ¨ç«¯å†…éƒ¨ API æ¥è·å–æ•°æ®ã€‚é¡¹ç›®é‡‡ç”¨ Docker å®¹å™¨åŒ–éƒ¨ç½²ï¼Œæä¾› RESTful API æ¥å£ï¼Œæ”¯æŒè·å–è±†ç“£ä¸»è¦çš„å½±è§†å†…å®¹æ¦œå•ã€‚

## åŠŸèƒ½ç‰¹æ€§
- ğŸ¬ **ç”µå½±æ¦œå•**ï¼šæ”¯æŒçƒ­é—¨ç”µå½±ã€æœ€æ–°ç”µå½±ã€è±†ç“£é«˜åˆ†ã€å†·é—¨ä½³ç‰‡åŠå…¶å­æ¦œå…±è®¡ 20 ä¸ªæ¦œå•ã€‚
- ğŸ“º **ç”µè§†æ¦œå•**ï¼šæ”¯æŒæœ€è¿‘çƒ­é—¨å‰§é›†ã€æœ€è¿‘çƒ­é—¨ç»¼è‰ºåŠå…¶å­æ¦œå…±è®¡ 10 ä¸ªæ¦œå•ã€‚
- ğŸ³ **Docker éƒ¨ç½²**ï¼šå®Œå…¨åŸºäº Docker å®¹å™¨è¿è¡Œï¼Œå¼€ç®±å³ç”¨ã€‚
- ğŸš€ **é«˜æ€§èƒ½**ï¼šåŸºäº Express.js æ¡†æ¶ï¼Œè½»é‡çº§é«˜æ€§èƒ½ã€‚
- ğŸ“‹ **æ ‡å‡†åŒ– API**ï¼šç»Ÿä¸€çš„å“åº”æ ¼å¼ï¼Œå®Œå–„çš„é”™è¯¯å¤„ç†ã€‚
- ğŸ”§ **æ˜“äºæ‰©å±•**ï¼šæ¨¡å—åŒ–è®¾è®¡ï¼Œæ˜“äºç»´æŠ¤å’Œæ‰©å±•ã€‚

## æ”¯æŒçš„æ¦œå•ç±»å‹
### ç”µå½±æ¦œå•
#### çƒ­é—¨ç”µå½±
- å…¨éƒ¨ï¼š`/api/douban/movie/hot/å…¨éƒ¨`
- åè¯­ï¼š`/api/douban/movie/hot/åè¯­`
- æ¬§ç¾ï¼š`/api/douban/movie/hot/æ¬§ç¾`
- éŸ©å›½ï¼š`/api/douban/movie/hot/éŸ©å›½`
- æ—¥æœ¬ï¼š`/api/douban/movie/hot/æ—¥æœ¬`

#### æœ€æ–°ç”µå½±
- å…¨éƒ¨ï¼š`/api/douban/movie/latest/å…¨éƒ¨`
- åè¯­ï¼š`/api/douban/movie/latest/åè¯­`
- æ¬§ç¾ï¼š`/api/douban/movie/latest/æ¬§ç¾`
- éŸ©å›½ï¼š`/api/douban/movie/latest/éŸ©å›½`
- æ—¥æœ¬ï¼š`/api/douban/movie/latest/æ—¥æœ¬`

#### è±†ç“£é«˜åˆ†
- å…¨éƒ¨ï¼š`/api/douban/movie/top/å…¨éƒ¨`
- åè¯­ï¼š`/api/douban/movie/top/åè¯­`
- æ¬§ç¾ï¼š`/api/douban/movie/top/æ¬§ç¾`
- éŸ©å›½ï¼š`/api/douban/movie/top/éŸ©å›½`
- æ—¥æœ¬ï¼š`/api/douban/movie/top/æ—¥æœ¬`

#### å†·é—¨ä½³ç‰‡
- å…¨éƒ¨ï¼š`/api/douban/movie/underrated/å…¨éƒ¨`
- åè¯­ï¼š`/api/douban/movie/underrated/åè¯­`
- æ¬§ç¾ï¼š`/api/douban/movie/underrated/æ¬§ç¾`
- éŸ©å›½ï¼š`/api/douban/movie/underrated/éŸ©å›½`
- æ—¥æœ¬ï¼š`/api/douban/movie/underrated/æ—¥æœ¬`

### ç”µè§†æ¦œå•
#### æœ€è¿‘çƒ­é—¨å‰§é›†
- ç»¼åˆï¼š`/api/douban/tv/drama/ç»¼åˆ`
- å›½äº§å‰§ï¼š`/api/douban/tv/drama/å›½äº§å‰§`
- æ¬§ç¾å‰§ï¼š`/api/douban/tv/drama/æ¬§ç¾å‰§`
- æ—¥å‰§ï¼š`/api/douban/tv/drama/æ—¥å‰§`
- éŸ©å‰§ï¼š`/api/douban/tv/drama/éŸ©å‰§`
- åŠ¨ç”»ï¼š`/api/douban/tv/drama/åŠ¨ç”»`
- çºªå½•ç‰‡ï¼š`/api/douban/tv/drama/çºªå½•ç‰‡`

#### æœ€è¿‘çƒ­é—¨ç»¼è‰º
- ç»¼åˆï¼š`/api/douban/tv/variety/ç»¼åˆ`
- å›½å†…ï¼š`/api/douban/tv/variety/å›½å†…`
- å›½å¤–ï¼š`/api/douban/tv/variety/å›½å¤–`

## éƒ¨ç½²
### Docker Composeï¼ˆæ¨èï¼‰
```yaml
version: "3.8"
services:
  douban-api:
    image: x1ao4/douban-api:latest
    container_name: douban-api
    ports:
      - 3000:3000
    restart: unless-stopped
```

### Docker Run
```bash
docker run -d \
  -p 3000:3000 \
  --name douban-api \
  --restart unless-stopped \
  x1ao4/douban-api:latest
```

## API æ–‡æ¡£
### åŸºç¡€ä¿¡æ¯
- åŸºç¡€ URLï¼š`http://localhost:3000`
- å“åº”æ ¼å¼ï¼šJSON
- å­—ç¬¦ç¼–ç ï¼šUTF-8

### é€šç”¨å“åº”æ ¼å¼
```json
{
  "success": true,
  "code": 0,
  "data": {},
  "message": "æ“ä½œæˆåŠŸ",
  "timestamp": "2024-01-01T00:00:00.000Z"
}
```

### ç”µå½±æ¦œå•æ¥å£
#### çƒ­é—¨ç”µå½±
```
GET /api/douban/movie/hot/:type?
```

#### æœ€æ–°ç”µå½±
```
GET /api/douban/movie/latest/:type?
```

#### è±†ç“£é«˜åˆ†
```
GET /api/douban/movie/top/:type?
```

#### å†·é—¨ä½³ç‰‡
```
GET /api/douban/movie/underrated/:type?
```
<br>

**è·¯å¾„å‚æ•°**
- `type`ï¼ˆstring, å¯é€‰ï¼‰ï¼šåœ°åŒºç±»å‹ï¼Œå¯é€‰å€¼ï¼š`å…¨éƒ¨`ã€`åè¯­`ã€`æ¬§ç¾`ã€`éŸ©å›½`ã€`æ—¥æœ¬`ï¼Œé»˜è®¤ `å…¨éƒ¨`

**æŸ¥è¯¢å‚æ•°**
- `start`ï¼ˆnumber, å¯é€‰ï¼‰ï¼šèµ·å§‹ä½ç½®ï¼Œé»˜è®¤ `0`
- `limit`ï¼ˆnumber, å¯é€‰ï¼‰ï¼šè¿”å›æ•°é‡ï¼Œé»˜è®¤ `20`ï¼Œæœ€å¤§ `100`

**ç¤ºä¾‹è¯·æ±‚**
```bash
# è·å–çƒ­é—¨ç”µå½± - å…¨éƒ¨
curl "http://localhost:3000/api/douban/movie/hot/å…¨éƒ¨"

# è·å–è±†ç“£é«˜åˆ† - åè¯­
curl "http://localhost:3000/api/douban/movie/top/åè¯­"

# è·å–æœ€æ–°ç”µå½± - æ¬§ç¾
curl "http://localhost:3000/api/douban/movie/latest/æ¬§ç¾?limit=10"
```

### ç”µè§†æ¦œå•æ¥å£
#### æœ€è¿‘çƒ­é—¨å‰§é›†
```
GET /api/douban/tv/drama/:type?
```

**è·¯å¾„å‚æ•°:**
- `type`ï¼ˆstring, å¯é€‰ï¼‰ï¼šå‰§é›†ç±»å‹ï¼Œå¯é€‰å€¼ï¼š`ç»¼åˆ`ã€`å›½äº§å‰§`ã€`æ¬§ç¾å‰§`ã€`æ—¥å‰§`ã€`éŸ©å‰§`ã€`åŠ¨ç”»`ã€`çºªå½•ç‰‡`ï¼Œé»˜è®¤ `ç»¼åˆ`

#### æœ€è¿‘çƒ­é—¨ç»¼è‰º
```
GET /api/douban/tv/variety/:type?
```

**è·¯å¾„å‚æ•°**
- `type`ï¼ˆstring, å¯é€‰ï¼‰ï¼šç»¼è‰ºç±»å‹ï¼Œå¯é€‰å€¼ï¼š`ç»¼åˆ`ã€`å›½å†…`ã€`å›½å¤–`ï¼Œé»˜è®¤ `ç»¼åˆ`

**æŸ¥è¯¢å‚æ•°**
- `start`ï¼ˆnumber, å¯é€‰ï¼‰ï¼šèµ·å§‹ä½ç½®ï¼Œé»˜è®¤ `0`
- `limit`ï¼ˆnumber, å¯é€‰ï¼‰ï¼šè¿”å›æ•°é‡ï¼Œé»˜è®¤ `20`ï¼Œæœ€å¤§ `100`

**ç¤ºä¾‹è¯·æ±‚**
```bash
# è·å–æœ€è¿‘çƒ­é—¨å‰§é›† - éŸ©å‰§
curl "http://localhost:3000/api/douban/tv/drama/éŸ©å‰§"

# è·å–æœ€è¿‘çƒ­é—¨ç»¼è‰º - å›½å†…
curl "http://localhost:3000/api/douban/tv/variety/å›½å†…?limit=10"

# è·å–åŠ¨ç”»
curl "http://localhost:3000/api/douban/tv/drama/åŠ¨ç”»"
```

### å…¼å®¹æ€§æ¥å£
#### é€šç”¨ç”µå½±æ¥å£
```
GET /api/douban/movie/recent_hot
```

#### é€šç”¨å‰§é›†æ¥å£
```
GET /api/douban/tv/recent_hot
```

### å…¶ä»–æ¥å£
#### è·å–ç”µå½±ç±»åˆ«åˆ—è¡¨
```
GET /api/douban/movie/categories
```

#### è·å–å‰§é›†ç±»åˆ«åˆ—è¡¨
```
GET /api/douban/tv/categories
```

#### è·å–æ‰€æœ‰ç±»åˆ«åˆ—è¡¨
```
GET /api/douban/categories
```

#### å¥åº·æ£€æŸ¥
```
GET /health
```

#### API æ–‡æ¡£
```
GET /
```

## ç¯å¢ƒå˜é‡
é¡¹ç›®æ”¯æŒé€šè¿‡ `.env` æ–‡ä»¶é…ç½®ç¯å¢ƒå˜é‡ï¼ˆå¯é€‰ï¼‰ï¼š

```bash
# æœåŠ¡ç«¯å£ï¼ˆé»˜è®¤ï¼š3000ï¼‰
PORT=3000
```

## æ³¨æ„äº‹é¡¹
- **ä½¿ç”¨é™åˆ¶**ï¼šæœ¬æœåŠ¡ä»…ç”¨äºå­¦ä¹ å’Œç ”ç©¶ç›®çš„ï¼Œè¯·éµå®ˆè±†ç“£çš„ä½¿ç”¨æ¡æ¬¾ã€‚
- **è¯·æ±‚é¢‘ç‡**ï¼šå»ºè®®åˆç†æ§åˆ¶è¯·æ±‚é¢‘ç‡ï¼Œé¿å…å¯¹è±†ç“£æœåŠ¡é€ æˆå‹åŠ›ã€‚
- **æ•°æ®æ¥æº**ï¼šæ‰€æœ‰æ•°æ®æ¥æºäºè±†ç“£ç§»åŠ¨ç«¯ APIï¼Œæ•°æ®å‡†ç¡®æ€§å’Œå¯ç”¨æ€§ä¾èµ–äºè±†ç“£æœåŠ¡ã€‚
- **ç½‘ç»œç¯å¢ƒ**ï¼šç¡®ä¿æœåŠ¡å™¨èƒ½å¤Ÿæ­£å¸¸è®¿é—®è±†ç“£ç§»åŠ¨ç«¯ APIã€‚

## èµèµ
å¦‚æœä½ è§‰å¾—è¿™ä¸ªé¡¹ç›®å¯¹ä½ æœ‰ç”¨ï¼Œå¯ä»¥è€ƒè™‘è¯·æˆ‘å–æ¯å’–å•¡æˆ–è€…ç»™æˆ‘ä¸€ä¸ªâ­ï¸ã€‚è°¢è°¢ä½ çš„æ”¯æŒï¼

<img width="383" alt="èµèµ" src="https://github.com/user-attachments/assets/bdd2226b-6282-439d-be92-5311b6e9d29c">
